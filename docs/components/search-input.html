<div class="search-container">
  <input type="text" 
         id="search-input" 
         placeholder="Enter search query..."
         aria-label="Semantic search query">
  <button id="search-button">Search</button>
</div>

<script>
document.getElementById('search-button').addEventListener('click', async function() {
  const query = document.getElementById('search-input').value.trim();
  if (!query) return;

  const button = this;
  button.disabled = true;
  button.textContent = 'Processing...';

  try {
    // Load the embedding pipeline
    const pipeline = await transformers.pipeline(
      'feature-extraction',
      'Xenova/all-MiniLM-L6-v2'
    );
    
    // Generate embedding
    const output = await pipeline(query, {
      pooling: 'mean',
      normalize: true
    });
    
    // Convert to array and display in results container
    const embedding = Array.from(output.data);
    document.getElementById('results-container').textContent = 
      `Generated embedding with ${embedding.length} dimensions`;
    
  } catch (error) {
    console.error('Embedding failed:', error);
    alert('Failed to generate embedding. Check console for details.');
  } finally {
    button.disabled = false;
    button.textContent = 'Search';
  }
});
</script>

<style>
.search-container {
  margin: 2rem 0;
  display: flex;
  gap: 0.5rem;
}

#search-input {
  flex-grow: 1;
  padding: 0.5rem;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 1rem;
}

#search-button {
  padding: 0.5rem 1rem;
  background: #007bff;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 1rem;
}

#search-button:hover {
  background: #0069d9;
}
</style>

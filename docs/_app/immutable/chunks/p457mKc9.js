import{S as X,i as Z,s as $,I as Ce,d,r as ee,u as te,J as ke,K as we,L as xe,b as T,o as x,e as b,f as D,j as E,n as Y,M as Ie,N as se,c as _,O,h as q,x as le,k as P,z as Te,P as K,a as N,q as U,g as R,t as A,m as Se,Q as B,C as ye,E as ge,F as be,D as Ee,R as ne}from"./D1YERkKp.js";import"./IHki7fMi.js";import{e as re}from"./D6YF6ztN.js";function Me(l,e){const t={},n={},r={$$scope:1};let s=l.length;for(;s--;){const i=l[s],o=e[s];if(o){for(const c in i)c in o||(n[c]=1);for(const c in o)r[c]||(t[c]=o[c],r[c]=1);l[s]=o}else for(const c in i)r[c]=1}for(const i in n)i in t||(t[i]=void 0);return t}function oe(l){return typeof l=="object"&&l!==null?l:{}}function Le(l){let e,t;const n=l[1].default,r=Ce(n,l,l[0],null);return{c(){e=E("div"),r&&r.c(),this.h()},l(s){e=b(s,"DIV",{class:!0});var i=D(e);r&&r.l(i),i.forEach(d),this.h()},h(){x(e,"class","post-content svelte-x9k56u")},m(s,i){T(s,e,i),r&&r.m(e,null),t=!0},p(s,[i]){r&&r.p&&(!t||i&1)&&ke(r,n,s,s[0],t?xe(n,s[0],i,null):we(s[0]),null)},i(s){t||(te(r,s),t=!0)},o(s){ee(r,s),t=!1},d(s){s&&d(e),r&&r.d(s)}}}function qe(l,e,t){let{$$slots:n={},$$scope:r}=e;return l.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,n]}class Pe extends X{constructor(e){super(),Z(this,e,qe,Le,$,{})}}let J=null,Q=!1,ie=!1;const W=new Map;let je=0;function ae(l){if(!J)throw new Error("Transformers worker not initialized");const e=je++;return new Promise((t,n)=>{W.set(e,{resolve:t,reject:n}),J.postMessage({type:"embed",text:l,id:e})})}async function De(){return ie?{modelReady:Q,modelError:!1}:(J=new Worker(new URL(""+new URL("../workers/embedding-worker-CfYq0Jqg.js",import.meta.url).href,import.meta.url),{type:"module"}),J.onmessage=l=>{const{type:e,id:t,embedding:n,error:r}=l.data;switch(e){case"ready":console.log("Embedding worker is ready."),Q=!0,document.dispatchEvent(new CustomEvent("model-ready"));break;case"complete":W.has(t)&&(W.get(t).resolve(n),W.delete(t));break;case"error":console.error("Worker error:",r),t===void 0?document.dispatchEvent(new CustomEvent("model-error",{detail:r})):W.has(t)&&(W.get(t).reject(new Error(r)),W.delete(t));break}},J.onerror=l=>{console.error("Critical worker error:",l),document.dispatchEvent(new CustomEvent("model-error",{detail:l.message}))},ie=!0,{modelReady:Q,modelError:!1})}function ce(l,e,t){var o;const n=l.slice();n[25]=e[t],n[30]=t;const r=n[2].data.slice(n[30]*384,(n[30]+1)*384);n[26]=r;const s=n[6].length>0&&n[6][0].index===n[30];n[27]=s;const i=(o=n[6].find(function(...p){return l[16](n[30],...p)}))==null?void 0:o.score;return n[28]=i,n}function ue(l){let e,t="Ã—",n,r;return{c(){e=E("button"),e.textContent=t,this.h()},l(s){e=b(s,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),U(e)!=="svelte-b2lxvx"&&(e.textContent=t),this.h()},h(){x(e,"class","clear-btn svelte-opypxp"),x(e,"aria-label","Clear search")},m(s,i){T(s,e,i),n||(r=O(e,"click",l[11]),n=!0)},p:Y,d(s){s&&d(e),n=!1,r()}}}function fe(l){let e;return{c(){e=E("div"),this.h()},l(t){e=b(t,"DIV",{class:!0}),D(e).forEach(d),this.h()},h(){x(e,"class","status-indicator svelte-opypxp"),K(e,"typing",l[5])},m(t,n){T(t,e,n)},p(t,n){n&32&&K(e,"typing",t[5])},d(t){t&&d(e)}}}function de(l){let e,t,n="Query",r,s,i,o,c,p,m,v,C,g,y=l[7].data.length+"",h,k,a,u,w,M=Array.from(l[7].data).map(_e).join(", ")+"",L,z;return{c(){e=E("div"),t=E("h3"),t.textContent=n,r=P(),s=E("div"),i=E("p"),o=A('"'),c=A(l[3]),p=A('"'),m=P(),v=E("details"),C=E("summary"),g=A("Vector ("),h=A(y),k=A(" dimensions)"),a=P(),u=E("pre"),w=A("["),L=A(M),z=A("]"),this.h()},l(V){e=b(V,"DIV",{class:!0});var f=D(e);t=b(f,"H3",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1hohx1y"&&(t.textContent=n),r=q(f),s=b(f,"DIV",{class:!0});var S=D(s);i=b(S,"P",{class:!0});var I=D(i);o=R(I,'"'),c=R(I,l[3]),p=R(I,'"'),I.forEach(d),m=q(S),v=b(S,"DETAILS",{class:!0});var j=D(v);C=b(j,"SUMMARY",{class:!0});var H=D(C);g=R(H,"Vector ("),h=R(H,y),k=R(H," dimensions)"),H.forEach(d),a=q(j),u=b(j,"PRE",{class:!0});var F=D(u);w=R(F,"["),L=R(F,M),z=R(F,"]"),F.forEach(d),j.forEach(d),S.forEach(d),f.forEach(d),this.h()},h(){x(t,"class","svelte-opypxp"),x(i,"class","query-text svelte-opypxp"),x(C,"class","svelte-opypxp"),x(u,"class","vector-data svelte-opypxp"),x(v,"class","vector-details svelte-opypxp"),x(s,"class","query-item svelte-opypxp"),x(e,"class","query-section svelte-opypxp")},m(V,f){T(V,e,f),_(e,t),_(e,r),_(e,s),_(s,i),_(i,o),_(i,c),_(i,p),_(s,m),_(s,v),_(v,C),_(C,g),_(C,h),_(C,k),_(v,a),_(v,u),_(u,w),_(u,L),_(u,z)},p(V,f){f&8&&N(c,V[3]),f&128&&y!==(y=V[7].data.length+"")&&N(h,y),f&128&&M!==(M=Array.from(V[7].data).map(_e).join(", ")+"")&&N(L,M)},d(V){V&&d(e)}}}function pe(l){let e,t,n="Corpus",r,s,i=re(l[10]),o=[];for(let c=0;c<i.length;c+=1)o[c]=he(ce(l,i,c));return{c(){e=E("div"),t=E("h3"),t.textContent=n,r=P(),s=E("div");for(let c=0;c<o.length;c+=1)o[c].c();this.h()},l(c){e=b(c,"DIV",{class:!0});var p=D(e);t=b(p,"H3",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-15dykcw"&&(t.textContent=n),r=q(p),s=b(p,"DIV",{class:!0});var m=D(s);for(let v=0;v<o.length;v+=1)o[v].l(m);m.forEach(d),p.forEach(d),this.h()},h(){x(t,"class","svelte-opypxp"),x(s,"class","corpus-list svelte-opypxp"),x(e,"class","corpus-section svelte-opypxp")},m(c,p){T(c,e,p),_(e,t),_(e,r),_(e,s);for(let m=0;m<o.length;m+=1)o[m]&&o[m].m(s,null)},p(c,p){if(p&1092){i=re(c[10]);let m;for(m=0;m<i.length;m+=1){const v=ce(c,i,m);o[m]?o[m].p(v,p):(o[m]=he(v),o[m].c(),o[m].m(s,null))}for(;m<o.length;m+=1)o[m].d(1);o.length=i.length}},d(c){c&&d(e),Se(o,c)}}}function me(l){let e,t,n,r=l[28].toFixed(3)+"",s;return{c(){e=E("div"),t=E("span"),n=A("similarity: "),s=A(r),this.h()},l(i){e=b(i,"DIV",{class:!0});var o=D(e);t=b(o,"SPAN",{class:!0});var c=D(t);n=R(c,"similarity: "),s=R(c,r),c.forEach(d),o.forEach(d),this.h()},h(){x(t,"class","similarity-score svelte-opypxp"),x(e,"class","similarity-info svelte-opypxp")},m(i,o){T(i,e,o),_(e,t),_(t,n),_(t,s)},p(i,o){o&64&&r!==(r=i[28].toFixed(3)+"")&&N(s,r)},d(i){i&&d(e)}}}function he(l){let e,t,n=l[25]+"",r,s,i,o,c,p="Vector",m,v,C,g=Array.from(l[26]).map(ve).join(", ")+"",y,h,k,a=l[28]!==void 0&&me(l);return{c(){e=E("div"),t=E("p"),r=A(n),s=P(),a&&a.c(),i=P(),o=E("details"),c=E("summary"),c.textContent=p,m=P(),v=E("pre"),C=A("["),y=A(g),h=A("]"),k=P(),this.h()},l(u){e=b(u,"DIV",{class:!0});var w=D(e);t=b(w,"P",{class:!0});var M=D(t);r=R(M,n),M.forEach(d),s=q(w),a&&a.l(w),i=q(w),o=b(w,"DETAILS",{class:!0});var L=D(o);c=b(L,"SUMMARY",{class:!0,"data-svelte-h":!0}),U(c)!=="svelte-7j32rh"&&(c.textContent=p),m=q(L),v=b(L,"PRE",{class:!0});var z=D(v);C=R(z,"["),y=R(z,g),h=R(z,"]"),z.forEach(d),L.forEach(d),k=q(w),w.forEach(d),this.h()},h(){x(t,"class","corpus-text svelte-opypxp"),x(c,"class","svelte-opypxp"),x(v,"class","vector-data svelte-opypxp"),x(o,"class","vector-details svelte-opypxp"),x(e,"class","corpus-item svelte-opypxp"),K(e,"top-result",l[27])},m(u,w){T(u,e,w),_(e,t),_(t,r),_(e,s),a&&a.m(e,null),_(e,i),_(e,o),_(o,c),_(o,m),_(o,v),_(v,C),_(v,y),_(v,h),_(e,k)},p(u,w){u[28]!==void 0?a?a.p(u,w):(a=me(u),a.c(),a.m(e,i)):a&&(a.d(1),a=null),w&4&&g!==(g=Array.from(u[26]).map(ve).join(", ")+"")&&N(y,g),w&64&&K(e,"top-result",u[27])},d(u){u&&d(e),a&&a.d()}}}function Ve(l){let e,t,n,r,s,i=l[3].trim(),o,c,p,m,v,C,g=i&&ue(l),y=(l[0]||l[1]||l[4]||l[5])&&fe(l),h=l[7]&&de(l),k=l[2]&&pe(l);return{c(){e=E("div"),t=E("div"),n=E("input"),s=P(),g&&g.c(),o=P(),y&&y.c(),c=P(),h&&h.c(),p=P(),k&&k.c(),m=le(),this.h()},l(a){e=b(a,"DIV",{class:!0});var u=D(e);t=b(u,"DIV",{class:!0});var w=D(t);n=b(w,"INPUT",{placeholder:!0,"aria-label":!0,class:!0}),s=q(w),g&&g.l(w),w.forEach(d),o=q(u),y&&y.l(u),u.forEach(d),c=q(a),h&&h.l(a),p=q(a),k&&k.l(a),m=le(),this.h()},h(){x(n,"placeholder",l[8]),x(n,"aria-label","Semantic search query"),n.disabled=r=!l[9],x(n,"class","search-input svelte-opypxp"),x(t,"class","search-input-wrapper svelte-opypxp"),x(e,"class","search-container svelte-opypxp")},m(a,u){T(a,e,u),_(e,t),_(t,n),se(n,l[3]),_(t,s),g&&g.m(t,null),_(e,o),y&&y.m(e,null),T(a,c,u),h&&h.m(a,u),T(a,p,u),k&&k.m(a,u),T(a,m,u),v||(C=[O(n,"input",l[15]),O(n,"input",l[12]),O(n,"keydown",l[13])],v=!0)},p(a,[u]){u&256&&x(n,"placeholder",a[8]),u&512&&r!==(r=!a[9])&&(n.disabled=r),u&8&&n.value!==a[3]&&se(n,a[3]),u&8&&(i=a[3].trim()),i?g?g.p(a,u):(g=ue(a),g.c(),g.m(t,null)):g&&(g.d(1),g=null),a[0]||a[1]||a[4]||a[5]?y?y.p(a,u):(y=fe(a),y.c(),y.m(e,null)):y&&(y.d(1),y=null),a[7]?h?h.p(a,u):(h=de(a),h.c(),h.m(p.parentNode,p)):h&&(h.d(1),h=null),a[2]?k?k.p(a,u):(k=pe(a),k.c(),k.m(m.parentNode,m)):k&&(k.d(1),k=null)},i:Y,o:Y,d(a){a&&(d(e),d(c),d(p),d(m)),g&&g.d(),y&&y.d(),h&&h.d(a),k&&k.d(a),v=!1,Ie(C)}}}function Re(l,e){let t=0,n=0,r=0;for(let s=0;s<l.length;s++)t+=l[s]*e[s],n+=l[s]*l[s],r+=e[s]*e[s];return t/(Math.sqrt(n)*Math.sqrt(r))}const _e=l=>l.toFixed(3),ve=l=>l.toFixed(3);function Ae(l,e,t){let n,r,s;const i=["The cat sat on the mat.","My dog loves to chase squirrels.","The sun is a star.","Jupiter is the largest planet in our solar system.","I enjoy reading books about history.","She is a talented musician who plays the piano.","The new software update includes several security patches.","To build a web application, you need to know HTML, CSS, and JavaScript.","The stock market experienced a significant downturn.","Economic policy can have a major impact on inflation."];let o="",c=!0,p=!1,m=!1,v=!1,C=!1,g=null,y=[],h=null;async function k(){if(!n||!o.trim()){t(6,y=[]),t(7,h=null);return}try{t(4,m=!0),t(5,C=!1),t(7,h=await ae(o.trim()));const I=[];for(let j=0;j<i.length;j++){const H=g.data.slice(j*384,(j+1)*384),F=Re(h.data,H);I.push({text:i[j],score:F,index:j})}I.sort((j,H)=>H.score-j.score),t(6,y=I)}catch(I){console.error("Search failed:",I),t(14,v=!0)}finally{t(4,m=!1)}}async function a(){try{t(1,p=!0),t(2,g=await ae(i)),t(1,p=!1)}catch(I){console.error("Corpus indexing failed:",I),t(14,v=!0),t(1,p=!1)}}function u(I){console.error("Model loading failed:",I),t(14,v=!0),t(0,c=!1),t(1,p=!1)}function w(){t(3,o=""),t(6,y=[]),t(7,h=null),t(5,C=!1),M&&clearTimeout(M)}let M;function L(){M&&clearTimeout(M),requestAnimationFrame(()=>{if(!o.trim()){t(6,y=[]),t(7,h=null),t(5,C=!1);return}n&&t(5,C=!0),M=setTimeout(()=>{k()},150)})}async function z(){try{const{modelReady:I}=await De();if(I)t(0,c=!1),await a();else{const j=()=>{t(0,c=!1),a()},H=F=>{u(F.detail)};return document.addEventListener("model-ready",j,{once:!0}),document.addEventListener("model-error",H,{once:!0}),()=>{document.removeEventListener("model-ready",j),document.removeEventListener("model-error",H)}}}catch(I){console.error("Failed to initialize transformers:",I),u(I)}}Te(async()=>{const I=()=>{window.requestIdleCallback?window.requestIdleCallback(()=>{z()},{timeout:100}):setTimeout(()=>{z()},10)};requestAnimationFrame(()=>{I()})});function V(I){I.key==="Escape"&&w()}function f(){o=this.value,t(3,o)}const S=(I,j)=>j.index===I;return l.$$.update=()=>{l.$$.dirty&7&&(n=!c&&!p&&g),l.$$.dirty&3&&t(9,r=!c&&!p),l.$$.dirty&16387&&t(8,s=c?"Loading model...":p?"Creating search index...":v?"An error occurred.":"Search semantic space...")},[c,p,g,o,m,C,y,h,s,r,i,w,L,V,v,f,S]}class ze extends X{constructor(e){super(),Z(this,e,Ae,Ve,$,{})}}function He(l){let e,t="What are Embeddings?",n,r,s="Embeddings are dense vector representations of text that capture semantic meaning. Similar concepts end up close together in this high-dimensional space.",i,o,c,p,m="How It Works",v,C,g="This demonstration runs entirely client-side, with no server processing. The transformer model processes your text and converts it to a 384-dimensional vector. We then use cosine similarity to find the most related documents.",y,h,k="Technical Implementation",a,u,w="<li><strong>Model</strong>: all-MiniLM-L6-v2 via transformers.js</li> <li><strong>Visualization</strong>: Three.js with PCA dimensionality reduction</li> <li><strong>Architecture</strong>: Web Workers for non-blocking computation</li>",M,L,z="Stay tuned as I add more functionality!",V;return o=new ze({}),{c(){e=E("h2"),e.textContent=t,n=P(),r=E("p"),r.textContent=s,i=P(),Ee(o.$$.fragment),c=P(),p=E("h2"),p.textContent=m,v=P(),C=E("p"),C.textContent=g,y=P(),h=E("h2"),h.textContent=k,a=P(),u=E("ul"),u.innerHTML=w,M=P(),L=E("p"),L.textContent=z},l(f){e=b(f,"H2",{"data-svelte-h":!0}),U(e)!=="svelte-r42999"&&(e.textContent=t),n=q(f),r=b(f,"P",{"data-svelte-h":!0}),U(r)!=="svelte-39xp2f"&&(r.textContent=s),i=q(f),be(o.$$.fragment,f),c=q(f),p=b(f,"H2",{"data-svelte-h":!0}),U(p)!=="svelte-14knkj"&&(p.textContent=m),v=q(f),C=b(f,"P",{"data-svelte-h":!0}),U(C)!=="svelte-1a0tc6a"&&(C.textContent=g),y=q(f),h=b(f,"H2",{"data-svelte-h":!0}),U(h)!=="svelte-ob03xp"&&(h.textContent=k),a=q(f),u=b(f,"UL",{"data-svelte-h":!0}),U(u)!=="svelte-ork8uy"&&(u.innerHTML=w),M=q(f),L=b(f,"P",{"data-svelte-h":!0}),U(L)!=="svelte-1ltzsus"&&(L.textContent=z)},m(f,S){T(f,e,S),T(f,n,S),T(f,r,S),T(f,i,S),ge(o,f,S),T(f,c,S),T(f,p,S),T(f,v,S),T(f,C,S),T(f,y,S),T(f,h,S),T(f,a,S),T(f,u,S),T(f,M,S),T(f,L,S),V=!0},p:Y,i(f){V||(te(o.$$.fragment,f),V=!0)},o(f){ee(o.$$.fragment,f),V=!1},d(f){f&&(d(e),d(n),d(r),d(i),d(c),d(p),d(v),d(C),d(y),d(h),d(a),d(u),d(M),d(L)),ye(o,f)}}}function Ue(l){let e,t;const n=[l[0],G];let r={$$slots:{default:[He]},$$scope:{ctx:l}};for(let s=0;s<n.length;s+=1)r=B(r,n[s]);return e=new Pe({props:r}),{c(){Ee(e.$$.fragment)},l(s){be(e.$$.fragment,s)},m(s,i){ge(e,s,i),t=!0},p(s,[i]){const o=i&1?Me(n,[i&1&&oe(s[0]),i&0&&oe(G)]):{};i&2&&(o.$$scope={dirty:i,ctx:s}),e.$set(o)},i(s){t||(te(e.$$.fragment,s),t=!0)},o(s){ee(e.$$.fragment,s),t=!1},d(s){ye(e,s)}}}const G={title:"Semantic Search",description:"Understanding embeddings through visualization"},{title:Oe,description:Ye}=G;function Fe(l,e,t){return l.$$set=n=>{t(0,e=B(B({},e),ne(n)))},e=ne(e),[e]}class Ke extends X{constructor(e){super(),Z(this,e,Fe,Ue,$,{})}}export{Ke as default,G as metadata};
